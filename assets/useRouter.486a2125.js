import{F as e,j as n,w as t,z as r}from"./vendor.3b3f849b.js";import{u as i}from"./useLocation.773d5c70.js";import{M as o}from"./Menu.37a7ef10.js";import"./index.f7e44da3.js";function a(e,n){void 0===n&&(n={});for(var t=function(e){for(var n=[],t=0;t<e.length;){var r=e[t];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)n.push({type:"CHAR",index:t,value:e[t++]});else{var i=1,o="";if("?"===e[u=t+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<e.length;)if("\\"!==e[u]){if(")"===e[u]){if(0==--i){u++;break}}else if("("===e[u]&&(i++,"?"!==e[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);o+=e[u++]}else o+=e[u++]+e[u++];if(i)throw new TypeError("Unbalanced pattern at "+t);if(!o)throw new TypeError("Missing pattern at "+t);n.push({type:"PATTERN",index:t,value:o}),t=u}else{for(var a="",u=t+1;u<e.length;){var p=e.charCodeAt(u);if(!(p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||95===p))break;a+=e[u++]}if(!a)throw new TypeError("Missing parameter name at "+t);n.push({type:"NAME",index:t,value:a}),t=u}else n.push({type:"CLOSE",index:t,value:e[t++]});else n.push({type:"OPEN",index:t,value:e[t++]});else n.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});else n.push({type:"MODIFIER",index:t,value:e[t++]})}return n.push({type:"END",index:t,value:""}),n}(e),r=n.prefixes,i=void 0===r?"./":r,o="[^"+u(n.delimiter||"/#?")+"]+?",a=[],p=0,f=0,s="",l=function(e){if(f<t.length&&t[f].type===e)return t[f++].value},d=function(e){var n=l(e);if(void 0!==n)return n;var r=t[f],i=r.type,o=r.index;throw new TypeError("Unexpected "+i+" at "+o+", expected "+e)},c=function(){for(var e,n="";e=l("CHAR")||l("ESCAPED_CHAR");)n+=e;return n};f<t.length;){var h=l("CHAR"),v=l("NAME"),m=l("PATTERN");if(v||m){var x=h||"";-1===i.indexOf(x)&&(s+=x,x=""),s&&(a.push(s),s=""),a.push({name:v||p++,prefix:x,suffix:"",pattern:m||o,modifier:l("MODIFIER")||""})}else{var E=h||l("ESCAPED_CHAR");if(E)s+=E;else if(s&&(a.push(s),s=""),l("OPEN")){x=c();var g=l("NAME")||"",y=l("PATTERN")||"",A=c();d("CLOSE"),a.push({name:g||(y?p++:""),pattern:g&&!y?o:y,prefix:x,suffix:A,modifier:l("MODIFIER")||""})}else d("END")}}return a}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(e){return e&&e.sensitive?"":"i"}function f(e,n,t){return function(e,n,t){void 0===t&&(t={});for(var r=t.strict,i=void 0!==r&&r,o=t.start,a=void 0===o||o,f=t.end,s=void 0===f||f,l=t.encode,d=void 0===l?function(e){return e}:l,c="["+u(t.endsWith||"")+"]|$",h="["+u(t.delimiter||"/#?")+"]",v=a?"^":"",m=0,x=e;m<x.length;m++){var E=x[m];if("string"==typeof E)v+=u(d(E));else{var g=u(d(E.prefix)),y=u(d(E.suffix));if(E.pattern)if(n&&n.push(E),g||y)if("+"===E.modifier||"*"===E.modifier){var A="*"===E.modifier?"?":"";v+="(?:"+g+"((?:"+E.pattern+")(?:"+y+g+"(?:"+E.pattern+"))*)"+y+")"+A}else v+="(?:"+g+"("+E.pattern+")"+y+")"+E.modifier;else v+="("+E.pattern+")"+E.modifier;else v+="(?:"+g+y+")"+E.modifier}}if(s)i||(v+=h+"?"),v+=t.endsWith?"(?="+c+")":"$";else{var w=e[e.length-1],C="string"==typeof w?h.indexOf(w[w.length-1])>-1:void 0===w;i||(v+="(?:"+h+"(?="+c+"))?"),C||(v+="(?="+h+"|"+c+")")}return new RegExp(v,p(t))}(a(e,t),n,t)}function s(e,n,t){return e instanceof RegExp?function(e,n){if(!n)return e;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=t.exec(e.source);i;)n.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=t.exec(e.source);return e}(e,n):Array.isArray(e)?function(e,n,t){var r=e.map((function(e){return s(e,n,t).source}));return new RegExp("(?:"+r.join("|")+")",p(t))}(e,n,t):f(e,n,t)}function l(e,n,t){let r,i;const o=e.find((({path:e})=>{const o=t.concat(e,"/(.*)").join(""),a=n+"/",u=[],p=s(o,u).exec(a);if(p){const[e,...n]=p,t=n.pop();return u.pop(),r={},u.forEach((({name:e},t)=>{r[e]=n[t]})),t&&(i=!0),!0}}));return o?{path:o.path,params:r,routes:o.routes,component:o.component,shouldHasChildren:i}:null}function d(e,t,r){const i=e[t];if(!i)return r?n(r,null):null;const{component:o,params:a,shouldHasChildren:u}=i;return n(o,{params:a},u?()=>d(e,t+1,r):null)}const c=i({},t());const h=function(t,r,o=i()){const a=e((()=>{const e=[];let n=t;for(;n&&n.length;){const t=l(n,o.pathname,e.map((({path:e})=>e)));if(!t)break;e.push(t),n=t.routes}return e}),!0);return n("div",null,(()=>d(a,0,r)))}([{path:"/app",component:function({children:e}){return n("div",null,n("div",null,"App"),n(o,{data:["/app/child/1","/app/xxxx"].map((e=>({title:e,id:e}))),onSetActive:({title:e})=>{c.goto(e)}}),n("div",null,"children:"),e)},routes:[{path:"/child/:id",component:function({params:e}){return n("div",null,n("div",null,"child"),n("div",null,n(o,{data:[1,2,3,4].map((e=>({title:e,id:e}))),onSetActive:({title:e})=>{c.goto(`/app/child/${e}`)}})),n("div",null,"params: ",(()=>JSON.stringify(e))))}}]}],(function(){return n("div",null,"404")}),c);c.goto("/app"),r(n("div",null,n("div",null,"Do not run this example in iframe, or you may not see location change. "),h),document.getElementById("root"));
