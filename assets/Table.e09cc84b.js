var e=Object.defineProperty,l=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(l,n,o)=>n in l?e(l,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[n]=o,i=(e,i)=>{for(var d in i||(i={}))l.call(i,d)&&t(e,d,i[d]);if(n)for(var d of n(i))o.call(i,d)&&t(e,d,i[d]);return e};import{M as d,g as r,m as a,E as c,x as s,P as p,a as u,h as f}from"./axii.es.c9c93548.js";import{s as h}from"./index.1d9f6fcb.js";function y(e){e.rows.modify(((e,{columnCount:l})=>{l.value+=1})),e.heads.modify(((e,{expandedRowKeys:l})=>{e[0].children.unshift(r("expandTh",{use:"th",inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0,"inline-width":60,rowSpan:e.length},r("expand",{onChange:()=>{}})))})),e.cells.modify(((e,{expandedRowKeys:l,row:n})=>{e.unshift(r("expandTd",{inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0,use:"td","inline-width":60},r("div",{onClick:()=>((e,l)=>{e.has(l)?e.delete(l):e.add(l)})(l,n.key)},l.has(n.key)?"-":"+")))})),e.row.modify(((l,{row:n,expandedRowRender:o,expandedRowKeys:t,columnCount:i})=>r(a,null,l,e.expandedRow()((()=>t.has(n.key)?r("tr",null,r("expandedTd",{use:"td",inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0,colSpan:i},o(n))):null)))))}function b(e){e.rows.modify(((e,{columnCount:l})=>{l.value+=1})),e.heads.modify(((e,{data:l,selectedRowKeys:n,columnCount:o})=>{const t=c((()=>n.size===l.length));e[0].children.unshift(r("selectTh",{use:"th",inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0,"block-width":60,rowSpan:e.length},r("input",{type:"checkbox",onClick:()=>((e,l)=>{e.size===l.length?e.clear():l.forEach((l=>{e.add(l.key)}))})(n,l),checked:t})))})),e.cells.modify(((e,{data:l,expandedRowRender:n,selectedRowKeys:o,row:t})=>{const i=c((()=>o.has(t.key)));e.unshift(r("selectTd",{use:"td",inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0,"block-width":60},r("input",{type:"checkbox",onClick:()=>((e,l)=>{e.has(l)?e.delete(l):e.add(l)})(o,t.key),checked:i})))}))}function m(e){e.root.prepare((({columns:e})=>({offsets:u((()=>{let l=0,n=0;const o=new WeakMap,t=new WeakMap;return e.forEach((e=>{const{fixed:i,width:d,dataIndex:r}=e;i&&(d?"left"===i?(o.set(e,l),l+=d):(t.set(e,n),n+=d):console.warn(`fixed column ${r} must have width`))})),{left:o,right:t}}))}))),e.headCell.modify(((e,{offsets:l,column:n})=>{n.fixed&&(e.props["block-position-sticky"]=!0,e.props[`block-${n.fixed}`]=l[n.fixed].get(n))})),e.cell.modify(((e,{offsets:l,column:n})=>{n.fixed&&(e.props["block-position-sticky"]=!0,e.props[`block-${n.fixed}`]=l[n.fixed].get(n))})),e.root.modify(((e,{columns:l,scroll:n})=>(e.props.block=!0,e.props["table-layout-fixed"]=!0,e.props["block-width"]=n.x,r("div",{block:!0,"block-overflow-x-scroll":!0,"block-overflow-y-scroll":!0,"block-max-height":n.y},e))))}function x(e,l){e.forEach((e=>{e.children?x(e.children,l):l(e)}))}function w(e,l,n){let o=0;return e.map((e=>{let t=1;return e.children&&(t=w(e.children,l+1,n).reduce(((e,l)=>e+l),0)),n(e,l,t,o),o+=t,t}))}function g({data:e,pagination:l,columns:n},o){const t=s(function(e){return w(e,0,(()=>{})).reduce(((e,l)=>e+l),0)}(n));return r("table",{inline:!0,"block-display-table":!0,"table-border-spacing-0":!0,"table-border-collapse-collapse":!0},r("thead",null,o.heads({columnCount:t})((()=>{let e=0;w(n,0,((l,n)=>{n>e&&(e=n)}));const l=[];return w(n,0,((n,t,d)=>{l[t]||(l[t]=r("tr",null));const a={};a.colSpan=d,n.children||(a.rowSpan=e-t+1),l[t].children.push(o.headCell({column:n,level:t,childrenCount:d})((()=>r("th",i({inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0},a),n.title))))})),l}))),r("tbody",null,o.rows({columnCount:t})((()=>e.map((e=>o.row({row:e})((()=>r("tr",null,o.cells({row:e})((()=>{const l=[];return x(n,(n=>{l.push(o.cell({column:n})((()=>r("td",{inline:!0,"inline-display":"table-cell","inline-border-width-1px":!0},e[n.dataIndex]))))})),l})))))))))),r("pagination",{data:l}))}y.propTypes={expandedRowRender:d.function,expandedRowKeys:d.array},y.Style=e=>{e.heads.elements.expandTh.style(i(i({},k),{textAlign:"center",verticalAlign:"middle"})),e.cells.elements.expandTd.style(i(i({},v),{textAlign:"center",verticalAlign:"middle"})),e.expandedRow.elements.expandedTd.style(i(i({},v),{overflowX:"auto"}))},b.Style=e=>{e.heads.elements.selectTh.style(i(i({},k),{textAlign:"center",verticalAlign:"middle"})),e.cells.elements.selectTd.style(i(i({},v),{textAlign:"center",verticalAlign:"middle"}))},b.propTypes={selectedRowKeys:d.array},m.propTypes={fixHeader:d.bool.default((()=>s(!1))),scroll:d.object.default((()=>p({})))},m.match=()=>!0;const k={borderColor:h().separateColor(),borderStyle:"solid",background:h().fieldColor(),padding:h().spacing()},v={borderStyle:"solid",borderColor:h().separateColor(),background:"#fff",padding:h().spacing()};g.Style=e=>{e.headCell.elements.th.style(k),e.cell.elements.td.style(v)},g.propTypes={data:d.array.default((()=>p([]))),columns:d.array.default((()=>p([])))};var C=f(g,[m,b,y,function(e){e.cell.modify(((e,t)=>{var{row:i,column:d}=t,r=((e,t)=>{var i={};for(var d in e)l.call(e,d)&&t.indexOf(d)<0&&(i[d]=e[d]);if(null!=e&&n)for(var d of n(e))t.indexOf(d)<0&&o.call(e,d)&&(i[d]=e[d]);return i})(t,["row","column"]);d.render&&(e.children=[d.render(i[d.dataIndex],i,r)]),Object.assign(e.attributes,{"inline-padding":h().spacing()})}))}]);export{C as T};
