import{U as e,R as n,$ as i,O as t,j as l,z as a,F as r,o}from"./vendor.3b3f849b.js";import{c}from"./util.cb618057.js";import{s as d}from"./index.f7e44da3.js";import{S as s}from"./Select.ccbfc8a7.js";import"./useLayer.937b5043.js";import"./Input.2767a10d.js";function u(e,n,i,t,a,r=[]){const{onSetActive:o}=i;return l("itemContainer",{block:!0,"block-border-width-1px":!0,"flex-display":!0,"flex-align-items-stretch":!0},l("item",{block:!0,"flex-display":!0,"flex-align-items-center":!0},l("name",{block:!0,"flex-grow-1":!0,onClick:()=>o(e,r)},(()=>t(e,r)))),(function(){return!e.children||0===e.children.length||e.collapsed?null:l("itemChildrenContainer",{block:!0,"flex-display":!0,"flex-align-items-center":!0},l("itemSlash",{inline:!0,"inline-width-10px":!0,"inline-height-1px":!0}),l("itemChildren",null,e.children.map(((o,c)=>{const d=n+1,s={item:o,level:d,parents:r.concat(e),childIndex:c,isFirst:0===c,isLast:c===e.children.length-1};return l("itemChildContainer",{inline:!0,"flex-display":!0,"flex-align-items-stretch":!0,key:o.id},a.itemPrefix(s)(l("itemChildPrefix",{inline:!0,"flex-display":!0,"flex-align-items-strech":!0},l("itemChildPrefixLine",{inline:!0,"flex-display":!0,"flex-direction-column":!0},l("itemChildPrefixLineTop",{inline:!0,"inline-width-1px":!0,"flex-grow-1":!0}),l("itemChildPrefixLineBottom",{inline:!0,"inline-width-1px":!0,"flex-grow-1":!0})),l("itemSlashContainer",{inline:!0,"flex-display":!0,"flex-align-items-center":!0},l("itemSlash",{inline:!0,"inline-width-10px":!0,"inline-height-1px":!0})))),l("itemChildContainerList",null,a.item(s)(u(o,d,i,t,a,r.concat(e)))))}))))}))}function m({data:e,onFold:n,onOpen:i,onSetActive:t,render:a},r){return l("container",{block:!0},(function(){return e.map((e=>r.item({item:e,level:0,parents:[]})(u(e,0,{onFold:n,onOpen:i,onSetActive:t},a,r))))}))}m.propTypes={data:e.object.default((()=>n([]))),onFold:e.callback.default((()=>e=>e.collapsed=!0)),onOpen:e.callback.default((()=>e=>e.collapsed=!1)),onSetActive:e.callback.default((()=>(e,n,{activeItemIdPath:i})=>i.value=n.concat(e).map((e=>e.id)))),activeItemIdPath:e.string.default((()=>i([]))),render:e.function.default((()=>e=>e.title))},m.Style=e=>{e.item.elements.expand.style({width:20,userSelect:"none",cursor:"pointer"}),e.item.elements.name.style((({item:e,parents:n,activeItemIdPath:i})=>{const t=n.concat(e),l=i.value.length&&t.length===i.value.length&&i.value.every(((e,n)=>{var i;return e===(null==(i=t[n])?void 0:i.id)}));return{padding:d().spacing(),background:l?d().interactable().active().color(-5):"transparent",userSelect:"none",cursor:"pointer"}})),e.item.elements.name.style((({level:e})=>({color:e>0?d().color(-5):d().color(5)}))),e.item.elements.itemSlash.style({background:"#000"}),e.itemPrefix.elements.itemSlash.style({background:"#000"}),e.itemPrefix.elements.itemChildPrefixLineTop.style((({isFirst:e})=>({background:e?"transparent":"#000"}))),e.itemPrefix.elements.itemChildPrefixLineBottom.style((({isLast:e})=>({background:e?"transparent":"#000"})))};var h=t(m);const p=n([{id:1,name:"john"},{id:2,name:"jim"},{id:3,name:"johnathon"},{id:4,name:"jody"},{id:5,name:"judy"}]),f=n([{name:"name1",id:"name1",children:[{name:"sub1",id:"sub1",children:[{name:"sub1 of sub1",id:"11"}]}]}]);function v(e,n){let i=null;return n.forEach((n=>{i=((null==i?void 0:i.children)||e).find((e=>e.id===n))})),i}const x=i([]),g=i(!1),b=c(),y=c();a(l("div",{tabIndex:"0",onKeyDown:e=>(e=>{const n=v(f,x.value);if("Tab"===e.code){e.preventDefault(),e.stopPropagation();const i={name:"new",isNew:!0,id:Date.now()};n.children?n.children.push(i):n.children=[i],x.value=x.value.concat(i.id),g.value=!0,b.current.focus(),b.current.select()}else if("Enter"===e.code&&(e.preventDefault(),e.stopPropagation(),!g.value)){const e=v(f,x.value.slice(0,x.value.length-1)),n={name:"new",isNew:!0,id:Date.now()};e.children.push(n),x.value=x.value.slice(0,x.value.length-1).concat(n.id),g.value=!0,b.current.focus()}})(e),ref:y},l(h,{data:f,activeItemIdPath:x,render:(e,n)=>{const t=r((()=>n.length===x.value.length-1&&n.concat(e).map((e=>e.id)).every(((e,n)=>e===x.value[n])))),a=i(o(e)),c=(i,t,l)=>{l.preventDefault(),l.stopPropagation();const r=n[n.length-1],o=r.children.findIndex((n=>n.id===e.id));a.value.id?r.children.splice(o,1,a.value):r.children[o]={id:e.isNew?e.id:Date.now(),name:a.value.name},g.value=!1,y.current.focus()};return l("detail",{inline:!0,"inline-max-width-300px":!0,onDblClick:()=>{x.value=n.concat(e).map((e=>e.id)),g.value=!0,b.current.focus(),b.current.select()}},(()=>t.value&&g.value?l(s,{ref:b,value:a,allOptions:p,recommendMode:!0,onPressEnter:c}):e.name))}}),l("div",null,l("pre",null,(()=>JSON.stringify(f,null,4))))),document.getElementById("root"));
