import{M as e,P as t,x as l,h as i,g as n,E as a,C as r,a as o,T as c}from"./axii.es.c9c93548.js";import{c as s}from"./util.3edd48b0.js";import{s as d}from"./index.1d9f6fcb.js";import{I as u}from"./Input.f03dce75.js";function m(e,t,l,i,r,o=[]){const{onFold:c,onOpen:s,onSetActive:d}=l;return a((()=>void 0!==e.children)),n("itemContainer",{block:!0,"block-border-width-1px":!0,"flex-display":!0,"flex-align-items-stretch":!0},n("item",{block:!0,"flex-display":!0,"flex-align-items-center":!0},n("name",{block:!0,"flex-grow-1":!0,onClick:()=>d(e,o)},i(e,o))),(function(){return!e.children||0===e.children.length||e.collapsed?null:n("itemChildrenContainer",{block:!0,"flex-display":!0,"flex-align-items-center":!0},n("itemSlash",{inline:!0,"inline-width-10px":!0,"inline-height-1px":!0}),n("itemChildren",null,e.children.map(((a,c)=>{const s=t+1,d={item:a,level:s,parents:o.concat(e),childIndex:c,isFirst:0===c,isLast:c===e.children.length-1};return n("itemChildContainer",{inline:!0,"flex-display":!0,"flex-align-items-stretch":!0},r.itemPrefix(d)(n("itemChildPrefix",{inline:!0,"flex-display":!0,"flex-align-items-strech":!0},n("itemChildPrefixLine",{inline:!0,"flex-display":!0,"flex-direction-column":!0},n("itemChildPrefixLineTop",{inline:!0,"inline-width-1px":!0,"flex-grow-1":!0}),n("itemChildPrefixLineBottom",{inline:!0,"inline-width-1px":!0,"flex-grow-1":!0})),n("itemSlashContainer",{inline:!0,"flex-display":!0,"flex-align-items-center":!0},n("itemSlash",{inline:!0,"inline-width-10px":!0,"inline-height-1px":!0})))),n("itemChildContainerList",null,r.item(d)(m(a,s,l,i,r,o.concat(e)))))}))))}))}function f({data:e,onFold:t,onOpen:l,onSetActive:i,render:a},r){return n("container",{block:!0},(function(){return e.map((e=>r.item({item:e,level:0,parents:[]})(m(e,0,{onFold:t,onOpen:l,onSetActive:i},a,r))))}))}f.propTypes={data:e.object.default((()=>t([]))),onFold:e.callback.default((()=>e=>e.collapsed=!0)),onOpen:e.callback.default((()=>e=>e.collapsed=!1)),onSetActive:e.callback.default((()=>(e,t,{activeItemKeyPath:l})=>l.value=t.concat(e).map((e=>e.key)))),activeItemKeyPath:e.string.default((()=>l([]))),render:e.function.default((()=>e=>e.title))},f.Style=e=>{e.item.elements.expand.style({width:20,userSelect:"none",cursor:"pointer"}),e.item.elements.name.style((({item:e,parents:t,activeItemKeyPath:l,level:i})=>{const n=t.concat(e),a=l.value.length&&n.length===l.value.length&&l.value.every(((e,t)=>{var l;return e===(null==(l=n[t])?void 0:l.key)}));return{padding:d().spacing(),background:a?d().interactable().active().color(-5):"transparent",userSelect:"none",cursor:"pointer"}})),e.item.elements.name.style((({level:e})=>({color:e>0?d().color(-5):d().color(5)}))),e.item.elements.itemSlash.style((({level:e})=>({background:"#000"}))),e.itemPrefix.elements.itemSlash.style((({level:e})=>({background:"#000"}))),e.itemPrefix.elements.itemChildPrefixLineTop.style((({level:e,isFirst:t})=>({background:t?"transparent":"#000"}))),e.itemPrefix.elements.itemChildPrefixLineBottom.style((({level:e,isLast:t})=>({background:t?"transparent":"#000"})))};var h=i(f);const p=t([{title:"title1",key:"title1",children:[{title:"sub1",key:"sub1",children:[{title:"sub1 of sub1",key:"11"},{title:"sub2 of sub1",key:"12"}]}]},{title:"title2",key:"title2",children:[{title:"sub1 of title2",key:"sub1 of title2"}]},{title:"title3",key:"title3"}]);function v(e,t){let l=null;return t.forEach((t=>{l=((null==l?void 0:l.children)||e).find((e=>e.key===t))})),l}const x=l([]),y=l(!1),g=s(),k=s();r(n("div",{tabIndex:"0",onKeyDown:e=>(e=>{const t=v(p,x.value);if("Tab"===e.code){e.preventDefault(),e.stopPropagation();const l={title:"new",key:Date.now()};t.children?t.children.push(l):t.children=[l],x.value=x.value.concat(l.key),y.value=!0,g.current.focus()}else if("Enter"===e.code)if(e.preventDefault(),e.stopPropagation(),y.value)y.value=!1,k.current.focus();else{const e=v(p,x.value.slice(0,x.value.length-1)),t={title:"new",key:Date.now()};e.children.push(t),x.value=x.value.slice(0,x.value.length-1).concat(t.key),y.value=!0,g.current.focus()}})(e),ref:k},n(h,{data:p,activeItemKeyPath:x,render:(e,t)=>{const l=o((()=>t.length===x.value.length-1&&t.concat(e).map((e=>e.key)).every(((e,t)=>e===x.value[t]))));return n("detail",{inline:!0,"inline-max-width-300px":!0,onDblClick:()=>{x.value=t.concat(e).map((e=>e.key)),y.value=!0,g.current.focus()}},(()=>l.value&&y.value?n(u,{value:c(e).title,ref:g}):e.title))}})),document.getElementById("root"));
