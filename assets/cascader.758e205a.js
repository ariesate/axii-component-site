var e=Object.defineProperty,n=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,i=(n,o,t)=>o in n?e(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t,a=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&i(e,l,a[l]);if(o)for(var l of o(a))t.call(a,l)&&i(e,l,a[l]);return e};import{M as l,x as r,P as s,h as c,a as d,g as u,E as p,m as f,H as m,C as b}from"./axii.es.c9c93548.js";import{u as h}from"./useLayer.0d533df2.js";import{n as v}from"./util.3edd48b0.js";import{I as g}from"./Input.f03dce75.js";import{s as y}from"./index.1d9f6fcb.js";function I(e,n,o,t,i){return u("optionList",{inline:!0,key:o},(()=>e.map((e=>i.optionItem({option:e})(u("optionItem",{block:!0,"block-font-size":y().fontSize(),"block-padding":`${y().spacing(-1)}px ${y().spacing()}px `,onClick:()=>{e.children&&0!==e.children.length?t.onOpen(e,o):(t.onChange(e),t.onBlur())}},e.name,e.children&&0!==e.children.length?">":""))))))}function j(e,n){const{value:o,options:t,renderValue:i,onFocus:a,focused:l,openedIds:r}=e,s=d((()=>{const e={};return function n(o){o.forEach((o=>{e[o.id]=o,o.children&&n(o.children)}))}(t),e})),c=m(),{source:b,node:y}=h((o=>u("optionContainer",{inline:!0,"flex-display":!0,tabindex:-1,onFocusOut:()=>e.onBlur(),"inline-display-none":p((()=>!l.value)),style:{background:"#fff",zIndex:99},ref:c},n.optionList({items:t})((()=>I(t,0,0,e,n))),(()=>r.map(((o,t)=>n.optionsList({items:s[o]})((()=>I(s[o].children,0,t+1,e,n)))))))),{getContainerRect:({top:e,left:n,height:o})=>({top:o+e,left:n})});return u(f,null,u("selectInput",{inline:!0,use:g,ref:b,onFocus:()=>{a(),v((()=>c.current.focus()))},focused:l,onBlur:()=>!1,value:p((()=>i(o)))}),y)}j.propTypes={value:l.object.default((()=>r([]))),options:l.object.default((()=>s([]))),focused:l.bool.default((()=>r(!1))),onFocus:l.callback.default((()=>({focused:e})=>e.value=!0)),onBlur:l.callback.default((()=>({focused:e,openedIds:n})=>{n.splice(0),e.value=!1})),match:l.function.default((()=>(e,n)=>!!e.value&&e.value.id===n.id)),renderOption:l.function.default((()=>e=>e.name)),renderValue:l.function.default((()=>e=>e.value?e.value.map((e=>e.name)).join("/"):"")),assignOption:l.function.default((()=>(e,n)=>Object.assign(e,n))),onChange:l.callback.default((()=>(e,{openedIds:n,options:o,value:t,assignOption:i})=>{const l=[];let r=o;n.forEach((e=>{const n=r.find((n=>n.id===e));l.push(i({},a(a({},n),{children:void 0}))),r=n.children})),t.value=l.concat(i({},e))})),openedIds:l.array.default((()=>s([]))),onOpen:l.callback.default((()=>(e,n,{openedIds:o})=>{o.splice(n),o[n]=e.id}))},j.Style=e=>{e.optionItem.elements.optionItem.style((({openedIds:e,value:n,option:o,match:t})=>{const i=e.includes(o.id);return{background:i?y().inverted().active().bgColor():y().active().bgColor(),color:i?y().interactable().active().inverted().color():y().color(),cursor:"pointer"}})),e.root.elements.optionContainer.style({boxShadow:y().elevate().shadow(0)})};var O=c(j);const k=s([{id:"1",name:"test1",children:[{id:"2",name:"son1"},{id:"3",name:"son2",children:[{id:"4",name:"son1"},{id:"5",name:"son2"}]}]},{id:"6",name:"test2",children:[{id:"7",name:"son1"},{id:"8",name:"son2"}]}]),x=r();function C(){return u("div",null,u(O,{value:x,options:k}))}b(u(C,null),document.getElementById("root"));
