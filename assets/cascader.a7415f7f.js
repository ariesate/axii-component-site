var e=Object.defineProperty,n=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(n,o,t)=>o in n?e(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t;import{U as r,$ as s,R as c,O as d,F as u,j as p,E as f,m,e as b,z as v}from"./vendor.3b3f849b.js";import{u as h}from"./useLayer.937b5043.js";import{n as g}from"./util.cb618057.js";import{I as y}from"./Input.2767a10d.js";import{s as O}from"./index.f7e44da3.js";function j(e,n,o,t,i){return p("optionList",{inline:!0,key:o},(()=>e.map((e=>i.optionItem({option:e})(p("optionItem",{block:!0,"block-font-size":O().fontSize(),"block-padding":`${O().spacing(-1)}px ${O().spacing()}px `,onClick:()=>{e.children&&0!==e.children.length?t.onOpen(e,o):(t.onChange(e),t.onBlur())}},e.name,e.children&&0!==e.children.length?">":""))))))}function I(e,n){const{value:o,options:t,renderValue:i,onFocus:a,focused:l,openedIds:r}=e,s=u((()=>{const e={};return function n(o){o.forEach((o=>{e[o.id]=o,o.children&&n(o.children)}))}(t),e})),c=b(),{source:d,node:v}=h((o=>p("optionContainer",{inline:!0,"flex-display":!0,tabindex:-1,onFocusOut:()=>e.onBlur(),"inline-display-none":f((()=>!l.value)),style:{background:"#fff",zIndex:99},ref:c},n.optionList({items:t})((()=>j(t,0,0,e,n))),(()=>r.map(((o,t)=>n.optionsList({items:s[o]})((()=>j(s[o].children,0,t+1,e,n)))))))),{getContainerRect:({top:e,left:n,height:o})=>({top:o+e,left:n})});return p(m,null,p("selectInput",{inline:!0,use:y,ref:d,onFocus:()=>{a(),g((()=>c.current.focus()))},focused:l,onBlur:()=>!1,value:f((()=>i(o)))}),v)}I.propTypes={value:r.object.default((()=>s([]))),options:r.object.default((()=>c([]))),focused:r.bool.default((()=>s(!1))),onFocus:r.callback.default((()=>({focused:e})=>e.value=!0)),onBlur:r.callback.default((()=>({focused:e,openedIds:n})=>{n.splice(0),e.value=!1})),match:r.function.default((()=>(e,n)=>!!e.value&&e.value.id===n.id)),renderOption:r.function.default((()=>e=>e.name)),renderValue:r.function.default((()=>e=>e.value?e.value.map((e=>e.name)).join("/"):"")),assignOption:r.function.default((()=>(e,n)=>Object.assign(e,n))),onChange:r.callback.default((()=>(e,{openedIds:r,options:s,value:c,assignOption:d})=>{const u=[];let p=s;r.forEach((e=>{const r=p.find((n=>n.id===e));var s;u.push(d({},(s=((e,n)=>{for(var o in n||(n={}))i.call(n,o)&&l(e,o,n[o]);if(t)for(var o of t(n))a.call(n,o)&&l(e,o,n[o]);return e})({},r),n(s,o({children:void 0}))))),p=r.children})),c.value=u.concat(d({},e))})),openedIds:r.array.default((()=>c([]))),onOpen:r.callback.default((()=>(e,n,{openedIds:o})=>{o.splice(n),o[n]=e.id}))},I.Style=e=>{e.optionItem.elements.optionItem.style((({openedIds:e,value:n,option:o,match:t})=>{const i=e.includes(o.id);return{background:i?O().inverted().active().bgColor():O().active().bgColor(),color:i?O().interactable().active().inverted().color():O().color(),cursor:"pointer"}})),e.root.elements.optionContainer.style({boxShadow:O().elevate().shadow(0)})};var k=d(I);const C=c([{id:"1",name:"test1",children:[{id:"2",name:"son1"},{id:"3",name:"son2",children:[{id:"4",name:"son1"},{id:"5",name:"son2"}]}]},{id:"6",name:"test2",children:[{id:"7",name:"son1"},{id:"8",name:"son2"}]}]),x=s();function w(){return p("div",null,p(k,{value:x,options:C}))}v(p(w,null),document.getElementById("root"));
